# VPS2.0 Environment Configuration Template
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

#==============================================
# Global Settings
#==============================================
DOMAIN=example.com
ADMIN_EMAIL=admin@example.com
TZ=UTC

#==============================================
# Database Credentials
#==============================================

# PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
# Individual database passwords
SWORDINTEL_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
MISP_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
N8N_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
GITLAB_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Redis
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Neo4j
NEO4J_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# MariaDB (for MISP)
MISP_DB_ROOT_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

#==============================================
# Application Credentials
#==============================================

# Portainer
# Generate with: docker run --rm httpd:2.4-alpine htpasswd -nbB admin 'YOUR_PASSWORD' | cut -d ":" -f 2
PORTAINER_PASSWORD_HASH=CHANGE_ME_BCRYPT_HASH_HERE

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# SWORDINTELLIGENCE
JWT_SECRET=CHANGE_ME_RANDOM_64_CHAR_STRING_HERE

# MISP
MISP_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
MISP_API_KEY=CHANGE_ME_AFTER_FIRST_LOGIN

# OpenCTI
OPENCTI_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
OPENCTI_ADMIN_TOKEN=CHANGE_ME_UUID_HERE
RABBITMQ_USER=opencti
RABBITMQ_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# n8n
N8N_ENCRYPTION_KEY=CHANGE_ME_RANDOM_STRING_HERE

# GitLab
# Note: GitLab generates its own initial root password
# Retrieve with: docker-compose exec gitlab cat /etc/gitlab/initial_root_password

#==============================================
# ARTICBASTION Configuration
#==============================================
BASTION_MODE=FORTRESS
SECURITY_LEVEL=PARANOID
NETWORK_ISOLATION=true
AUDIT_LEVEL=MAXIMUM
IDS_MODE=ACTIVE

#==============================================
# HURRICANE IPv6 Proxy (Optional)
#==============================================

# Enable/Disable HURRICANE
HURRICANE_ENABLED=false

# Hurricane Electric Tunnel
HE_ENABLED=false
HE_USERNAME=your_he_username
HE_PASSWORD=your_he_password
HE_TUNNEL_ID=your_tunnel_id

# Mullvad VPN
MULLVAD_ENABLED=false
MULLVAD_ACCOUNT=your_mullvad_account_number

# WireGuard
WG_ENABLED=false

# HURRICANE Settings
HURRICANE_LOG_LEVEL=info
IPV6_PREFIX=
IPV6_GATEWAY=

#==============================================
# Monitoring & Alerting
#==============================================

# Watchtower notifications (optional)
# Format: discord://token@channel or telegram://token@channel
WATCHTOWER_NOTIFICATION_URL=

# Grafana Slack/Discord webhook (optional)
GRAFANA_NOTIFICATION_WEBHOOK=

#==============================================
# Security Settings
#==============================================

# Fail2ban (configured on host)
FAIL2BAN_BANTIME=3600
FAIL2BAN_MAXRETRY=5
FAIL2BAN_FINDTIME=600

# CrowdSec API Key (optional)
CROWDSEC_API_KEY=

#==============================================
# Backup Settings
#==============================================

# Backup destination (local or remote)
BACKUP_DIR=/srv/backups
BACKUP_RETENTION_DAYS=30

# S3-compatible backup storage (optional)
S3_BACKUP_ENABLED=false
S3_ENDPOINT=
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=

#==============================================
# Resource Limits
#==============================================

# Elasticsearch (OpenCTI)
ES_JAVA_OPTS=-Xms2g -Xmx2g

# Node (OpenCTI)
NODE_OPTIONS=--max-old-space-size=4096

#==============================================
# Build Arguments
#==============================================
BUILD_DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
VCS_REF=$(git rev-parse --short HEAD)

#==============================================
# CLOUDCLEAR - Cloud Provider Detection & Intelligence
#==============================================

# Enable CLOUDCLEAR deployment
DEPLOY_CLOUDCLEAR=false

# API Configuration
CLOUDCLEAR_SECRET_KEY=CHANGE_ME_CLOUDCLEAR_SECRET_KEY_32_CHARS
CLOUDCLEAR_MAX_CONCURRENT_SCANS=10
CLOUDCLEAR_SCAN_TIMEOUT=300

# Intelligence Service API Keys (Optional)
CLOUDCLEAR_SHODAN_API_KEY=
CLOUDCLEAR_CENSYS_API_ID=
CLOUDCLEAR_CENSYS_API_SECRET=
CLOUDCLEAR_VIRUSTOTAL_API_KEY=

# Cloud Provider API Keys (Optional - for enhanced detection)
CLOUDCLEAR_CLOUDFLARE_API_KEY=
CLOUDCLEAR_CLOUDFLARE_API_EMAIL=
CLOUDCLEAR_CLOUDFLARE_ACCOUNT_ID=
CLOUDCLEAR_AKAMAI_CLIENT_TOKEN=
CLOUDCLEAR_AKAMAI_CLIENT_SECRET=
CLOUDCLEAR_AKAMAI_ACCESS_TOKEN=
CLOUDCLEAR_AWS_ACCESS_KEY_ID=
CLOUDCLEAR_AWS_SECRET_ACCESS_KEY=
CLOUDCLEAR_AWS_REGION=us-east-1
CLOUDCLEAR_AZURE_SUBSCRIPTION_ID=
CLOUDCLEAR_AZURE_CLIENT_ID=
CLOUDCLEAR_AZURE_CLIENT_SECRET=
CLOUDCLEAR_AZURE_TENANT_ID=
CLOUDCLEAR_GCP_PROJECT_ID=
CLOUDCLEAR_GCP_SERVICE_ACCOUNT_KEY=

#==============================================
# ARTICBASTION - Quantum-Resistant Mesh Security Gateway
#==============================================

# Enable ARTICBASTION deployment
DEPLOY_ARTICBASTION=false

# Port Configuration
ARTICBASTION_PORT=8022
ARTICBASTION_MESH_PORT=7946
ARTICBASTION_MESH_SECURE_PORT=7947
ARTICBASTION_DASHBOARD_PORT=5000
ARTICBASTION_METRICS_PORT=9091

# Proxy/Tunnel Ports (for routing traffic through ARTICBASTION)
ARTICBASTION_SOCKS5_PORT=1081
ARTICBASTION_HTTP_PROXY_PORT=8890
ARTICBASTION_HTTPS_PROXY_PORT=8891

# HTTP/HTTPS Proxy Ports for HURRICANE
HURRICANE_HTTP_PROXY_PORT=8888
HURRICANE_HTTPS_PROXY_PORT=8889

# Security Features
ARTICBASTION_HONEYPOT_ENABLED=true

# Database Configuration (Optional - uses CockroachDB if available)
ARTICBASTION_DB_HOST=
ARTICBASTION_DB_PORT=26257
ARTICBASTION_DB_NAME=articbastion
ARTICBASTION_DB_USER=articbastion
ARTICBASTION_DB_PASSWORD=CHANGE_ME_ARTICBASTION_DB_PASSWORD

# Instance Identity (Generated on first deployment)
ARTICBASTION_INSTANCE_ID=

#==============================================
# DNS Intelligence Hub - Private DNS Resolver & VPN
#==============================================

# Enable DNS Intelligence Hub deployment
DEPLOY_DNS_INTELLIGENCE=false

# WireGuard VPN Server Configuration
WIREGUARD_SERVER_URL=38.102.87.235
WIREGUARD_PORT=51820
WIREGUARD_PEERS=1
WIREGUARD_ALLOWED_IPS=10.10.0.0/24
WIREGUARD_LOG_CONFS=true

# WireGuard UI Management Interface
WIREGUARD_UI_USERNAME=admin
WIREGUARD_UI_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
WIREGUARD_UI_PASSWORD_HASH=
WIREGUARD_UI_SESSION_SECRET=CHANGE_ME_RANDOM_32_CHAR_STRING

# Technitium DNS Server Configuration
TECHNITIUM_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# DNS Upstream Forwarders (comma-separated)
# Cloudflare: 1.1.1.1,1.0.0.1
# Google: 8.8.8.8,8.8.4.4
# Quad9: 9.9.9.9,149.112.112.112
# Custom chain example: 1.1.1.1,8.8.8.8,9.9.9.9
TECHNITIUM_FORWARDERS=1.1.1.1,1.0.0.1,8.8.8.8,8.8.4.4

# DNS Blocklists (URLs separated by semicolons)
# Example blocklists:
# - Malware: https://malware-filter.gitlab.io/malware-filter/urlhaus-filter-agh.txt
# - Tracking: https://v.firebog.net/hosts/Easyprivacy.txt
# - Ads: https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt
TECHNITIUM_BLOCKLISTS=

# DNS-over-HTTPS Configuration
DNS_ENABLE_DOH=false
DNS_DOH_PUBLIC=false

# DNS Logging & Analytics
DNS_LOG_QUERIES=true
DNS_LOG_RETENTION_DAYS=90
DNS_ENABLE_ANALYTICS=true

# VPN Network Configuration
VPN_SUBNET=10.10.0.0/24
VPN_GATEWAY=10.10.0.1
VPN_DNS=10.10.0.1
VPN_MTU=1420
VPN_KEEPALIVE=25

# Firewall Configuration
DNS_FIREWALL_AUTO_CONFIGURE=true
SSH_PORT=22

# Client Management
DNS_AUTO_GENERATE_CONFIGS=true
DNS_QR_CODE_GENERATION=true

#==============================================
# Mattermost - Secure Team Collaboration
#==============================================

# Enable Mattermost deployment
DEPLOY_MATTERMOST=false

# Database Configuration
MATTERMOST_DB_USER=mattermost
MATTERMOST_DB_PASSWORD=CHANGE_ME_MATTERMOST_DB_PASSWORD

# Redis Cache
MATTERMOST_REDIS_PASSWORD=CHANGE_ME_MATTERMOST_REDIS_PASSWORD

# MinIO Object Storage
MATTERMOST_MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY
MATTERMOST_MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY_32_CHARS_MIN

# Security Settings
MATTERMOST_PUBLIC_LINK_SALT=CHANGE_ME_RANDOM_32_CHAR_SALT

# Email Configuration (SMTP)
MATTERMOST_SEND_EMAIL_NOTIFICATIONS=true
MATTERMOST_FEEDBACK_EMAIL=intel@swordintelligence.airforce
MATTERMOST_REPLY_TO_ADDRESS=noreply@swordintelligence.airforce
MATTERMOST_SMTP_SERVER=smtp.example.com
MATTERMOST_SMTP_PORT=587
MATTERMOST_SMTP_USERNAME=intel@swordintelligence.airforce
MATTERMOST_SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
MATTERMOST_SMTP_AUTH=true
MATTERMOST_SMTP_SECURITY=STARTTLS

# User Management
MATTERMOST_ENABLE_USER_CREATION=false
MATTERMOST_ENFORCE_MFA=false
MATTERMOST_RESTRICT_EMAIL_DOMAINS=

# Logging
MATTERMOST_LOG_LEVEL=INFO

# Compliance & Audit
MATTERMOST_COMPLIANCE_ENABLE=false

#==============================================
# POLYGOTYA - SSH Callback Server (TEMPEST Level C / Post-Quantum)
#==============================================

# Enable POLYGOTYA deployment
DEPLOY_POLYGOTYA=false

# Authentication & Security
# Generate with: openssl rand -base64 32
POLYGOTYA_API_KEY=CHANGE_ME_POLYGOTYA_API_KEY_CHANGE_THIS

# Session secret key (generate with: openssl rand -hex 32)
POLYGOTYA_SECRET_KEY=CHANGE_ME_POLYGOTYA_SECRET_KEY_CHANGE_THIS

# Default admin password (CHANGE IMMEDIATELY after first login!)
# If not set, a random password will be generated and printed on startup
POLYGOTYA_ADMIN_PASSWORD=CHANGE_ME_POLYGOTYA_ADMIN_PASSWORD

# Session Configuration
# Session timeout in seconds (default: 3600 = 1 hour)
POLYGOTYA_SESSION_TIMEOUT=3600

# Security Notes:
# - Uses Post-Quantum Cryptography (ML-KEM-1024, ML-DSA-87)
# - TEMPEST Level C compliant UI (Amber/Green on Black)
# - bcrypt password hashing with SHA-512 pre-hash
# - Account lockout after 5 failed attempts (30-minute lock)
# - Audit logging with SHA-384 integrity verification
# - TLS 1.3 only (enforced via Caddy)
# - Rate limiting: 5 req/s for API, 10 req/s for dashboard

#==============================================
# Development/Testing (DO NOT USE IN PRODUCTION)
#==============================================

# Skip TLS verification (DEVELOPMENT ONLY)
SKIP_TLS_VERIFY=false

# Debug mode
DEBUG=false

#==============================================
# Password Generation Helper
#==============================================
# Generate strong passwords with:
# openssl rand -base64 32
#
# Generate UUID for OpenCTI token:
# uuidgen
#
# Generate JWT secret (64 chars):
# openssl rand -base64 64
#
# Generate Portainer password hash:
# docker run --rm httpd:2.4-alpine htpasswd -nbB admin 'YOUR_PASSWORD' | cut -d ":" -f 2
